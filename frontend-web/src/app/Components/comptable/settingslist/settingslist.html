<!-- Declaration Settings Section -->
<div class="latest-products">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="section-heading">
            <h2>Paramètres de Déclarations</h2>
          </div>
        </div>
  
        <!-- Loader -->
        <div class="col-md-12" *ngIf="isLoading">
          <p class="text-center">Chargement des paramètres...</p>
        </div>
  
        <!-- Error -->
        <div class="col-md-12" *ngIf="!isLoading && errorMessage">
          <p class="text-danger text-center">{{ errorMessage }}</p>
        </div>
  
        <!-- Cards List -->
        <div class="col-md-12" *ngIf="!isLoading && declarationsettings.length > 0">
          <div class="row">
            <div class="col-md-12 mb-4" *ngFor="let declaration of declarationsettings">
              <div class="declaration-card shadow-sm">
                
                <!-- Card Header -->
                <div class="card-header">
                  <h5>{{ declaration.typedeclaration }} <small>({{ declaration.typedeclarationArabe }})</small></h5>
                </div>
  
                <!-- Card Body -->
                <div class="card-body">
                  <p><strong>ID :</strong> {{ declaration.idParamtres_declaration }}</p>
                  <p><strong>ID Comptable :</strong> {{ declaration.Comptables_idComptable ||'par Defaut'}}</p>
  
                  <!-- Table of Lines -->
                  <h6 class="mt-3">Lignes associées :</h6>
                  <div *ngIf="declaration.lines && declaration.lines.length > 0; else noLines">
                    <div class="table-responsive custom-table">
                        <table class="table table-striped table-hover align-middle">
                          <thead>
                            <tr>
                              <th>Rang</th>
                              <th>Libellé</th>
                              <th>Libellé Arabe</th>
                              <th>Compte Comptable</th>
                              <th>Débit/Crédit</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let line of declaration.lines">
                              <td>{{ line.rang }}</td>
                              <td>{{ line.libellee }}</td>
                              <td>{{ line.libelleeArabe }}</td>
                              <td>{{ line.compte_comptable || 'par defaut '}}</td>
                              <td>{{ line.debit_credit }}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      
                  </div>
                  <ng-template #noLines>
                    <p class="text-muted">Aucune ligne associée a cette declaration .</p>
                  </ng-template>
  
                  <!-- Update Button -->
                  <div class="text-center mt-3">
                    <button class="btn btn-dark-golden" (click)="updateDeclaration(declaration.idParamtres_declaration)">
                      Mettre à jour
                    </button>
                  </div>
  
                </div>
  
              </div>
            </div>
          </div>
        </div>
  
        <!-- No Results -->
        <div class="col-md-12" *ngIf="!isLoading && declarationsettings.length === 0">
          <p class="text-center">Aucun paramètre de déclaration trouvé.</p>
        </div>
      </div>
    </div>
  </div>
  